<!--index.wxml-->

<!-- 头部搜索区域 -->
<view class="search-header">
  <view class="search-container">
    <view class="city-selector" bindtap="openAreaPicker">
      <text class="city-text">{{cityName}}</text>
      <van-icon name="arrow-down" class="chevron-down" />
    </view>
    <view class="search-input-wrapper">
      <van-icon name="search" class="search-icon" />
      <input class="search-input" type="text" placeholder="搜索门店" value="{{name}}" bindinput="onInputChange"/>
    </view>
  </view>
</view>

<!-- 城市选择弹窗 -->
<van-popup show="{{showArea}}" position="bottom" custom-style="height: auto; border-radius: 16rpx 16rpx 0 0;" bind:close="onAreaClose">
  <van-area
    area-list="{{areaList}}"
    value="{{areaValue}}"
    columns-num="{{3}}"
    columns-placeholder="{{['请选择','请选择','请选择']}}"
    bind:confirm="onAreaConfirm"
    bind:cancel="onAreaClose"
  />
</van-popup>
<view class="container">
  <!-- 列表 -->
  <view class="lists">
    <view class="list">
    <block wx:if="{{MainStorelist.length>0}}">
      <view class="item" bind:tap="goStore" data-storeid="{{item.storeId}}" wx:for="{{MainStorelist}}" wx:key="MainStorelist">
          <view wx:if="{{item.headImg}}">
            <image class="img" src="{{item.headImg}}" mode="scaleToFill" binderror="onImageError" data-index="{{index}}"></image>
          </view>
          <view wx:else>
            <image class="img" src="/logo.png" mode="aspectFit"></image>
          </view>
          <view class="info">
            <view class="name">{{item.storeName}}</view>
            <view class="iconfont icon-weizhi btn" catchtap="goTencentMap" data-info="{{item}}"></view>
            <view class="iconfont icon-phone btn" catchtap="call" data-info="{{item.kefuPhone}}"></view>
            <view class="tag-primary" wx:if="{{item.distance}}"><text class="distance">{{item.distance}}</text>km</view>
          </view>
          <view class="address">
              {{item.address}}
            </view>
        
      </view>
    </block>
    <block wx:else>
      <view>
          <view class="noStoreInfo" bind:tap="goUser"> - 暂无门店 - </view>
          <button bind:tap="goUser" class="noStoreBtn">个人中心</button>
      </view>
    </block>
    </view>
  </view>
</view>
<!-- 右侧快捷入口 -->
<view class="quickBtns">
  <view class="btn bg-primary door" bind:tap="openDoor">
    <view class="item">
      <view class="iconfont icon-door-open"></view>
      <view class="text">开门</view>
    </view>
  </view>
  <navigator class="btn color-primary help" url="../help/help">
    <view class="item">
      <view class="iconfont icon-help"></view>
      <view class="text">帮助</view>
    </view>
  </navigator>
</view>

<view class="bt"></view>
