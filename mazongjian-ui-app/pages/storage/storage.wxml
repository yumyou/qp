<!--pages/storage/storage.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ ‡é¢˜ -->


  <!-- é€‰æ‹©æ¨¡å¼ -->
  <view class="select-mode" wx:if="{{currentMode === 'select'}}">
    <view class="mode-subtitle">è¯·é€‰æ‹©</view>
    
    <view class="mode-cards">
      <!-- å­˜æ†å¡ç‰‡ -->
      <view class="mode-card deposit-card" bindtap="selectDeposit">
        <view class="mode-icon deposit-icon">
          <text class="icon-text">ğŸ“¦</text>
        </view>
        <view class="mode-text">å­˜</view>
      </view>
      
      <!-- å–æ†å¡ç‰‡ -->
      <view class="mode-card retrieve-card" bindtap="selectRetrieve">
        <view class="mode-icon retrieve-icon">
          <text class="icon-text">ğŸ“„</text>
        </view>
        <view class="mode-text">å–</view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæ¨¡å¼ -->
  <view class="operation-mode" wx:if="{{currentMode === 'deposit' || currentMode === 'retrieve'}}">
    <!-- ä¸­å¤®å›¾æ ‡ -->
    <view class="central-icon {{currentMode === 'deposit' ? 'deposit-icon-large' : 'retrieve-icon-large'}}">
      <text class="icon-text-large">{{currentMode === 'deposit' ? 'ğŸ“¦' : 'ğŸ“„'}}</text>
    </view>
    
    <!-- æ“ä½œè¯´æ˜ -->
    <view class="operation-instruction">
      <text class="instruction-text">{{operationStatus.message}}</text>
    </view>
    
    <!-- æŸœé—¨ä¿¡æ¯ -->
    <view class="cabinet-info">
      <text class="cabinet-number">æŸœé—¨ç¼–å·: {{cabinetInfo.doorNumber}}</text>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="operation-buttons" wx:if="{{cabinetInfo.status === 'open'}}">
      <button 
        class="confirm-btn"
        bindtap="confirmOperation"
        disabled="{{operationStatus.loading}}"
      >
        <text wx:if="{{operationStatus.loading}}">å¤„ç†ä¸­...</text>
        <text wx:else>ç¡®è®¤å®Œæˆ</text>
      </button>
      
      <button 
        class="cancel-btn"
        bindtap="cancelOperation"
        disabled="{{operationStatus.loading}}"
      >
        <text>å–æ¶ˆæ“ä½œ</text>
      </button>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{operationStatus.loading}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">{{operationStatus.message}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="bottom-actions" wx:if="{{currentMode === 'select'}}">
    <button class="records-btn" bindtap="viewRecords">
      <text>æŸ¥çœ‹è®°å½•</text>
    </button>
  </view>
</view> 